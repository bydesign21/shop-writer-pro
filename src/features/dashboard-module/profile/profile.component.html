<div class="container mx-auto">
 <swp-breadcrumb [breadcrumbs]="breadcrumbs"></swp-breadcrumb>
  <div class="flex flex-col md:flex-row bg-white p-6 rounded-lg shadow-lg">
    <div class="mb-4 md:mb-0 md:mr-6">
      <img [src]="user['custom:avatarUrl']" class="rounded-full h-32 w-32 object-cover mb-4" *ngIf="!editing" />
      <div *ngIf="editing" class="relative h-32 w-32">
        <nz-upload class="h-full w-full"
          [nzAction]="'https://jsonplaceholder.typicode.com/posts/'"
          [(nzFileList)]="fileList"
          [nzMultiple]="false"
          [nzCustomRequest]="customReq"
          (nzChange)="handleChange($event)"
          nzLimit='1'
          [nzPreview]="null"
          (nzFileListChange)="handleFileListChange($event)"
        >
          <div class="absolute inset-0 flex items-center justify-center bg-gray-200 text-gray-500 rounded-full">
            <i nz-icon nzType="plus"></i>
            <div>Upload</div>
          </div>
        </nz-upload>
      </div>
    </div>
    <div class="flex-grow">
      <div *ngIf="!editing" class="mb-4">
        <h3 class="text-lg font-semibold mb-2">{{ user.name }}</h3>
        <p class="text-gray-500 mb-1">{{ user.email }}</p>
        <p class="text-gray-500 mb-1">{{ user.phone_number }}</p>
        <p class="text-gray-500 mb-1">{{ user['custom:companyName'] }}</p>
        <p class="text-gray-500">{{ user.address }}</p>
      </div>
      <form *ngIf="editing" [formGroup]="userForm" class="space-y-4">
        <div class="flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-4">
          <input nz-input formControlName="name" placeholder="Name" class="flex-grow p-2 border rounded" />
          <input nz-input formControlName="email" placeholder="Email" class="flex-grow p-2 border rounded" />
        </div>
        <div class="flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-4">
          <input nz-input formControlName="phone_number" placeholder="Phone Number" class="flex-grow p-2 border rounded" />
          <input nz-input formControlName="custom:companyName" placeholder="Company Name" class="flex-grow p-2 border rounded" />
        </div>
        <input ngx-google-places-autocomplete id="address" nz-input (onAddressChange)="handleAddressChange($event)" formControlName="address" placeholder="Address" class="p-2 border rounded" />
        <input nz-input formControlName="custom:avatarUrl" hidden="true">
      </form>
    </div>
  </div>
  <div class="flex justify-between mt-6">
    <button (click)="toggleEdit()" class="py-2 px-4 rounded bg-blue-500 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
      {{ editing ? 'Cancel' : 'Edit' }}
    </button>
    <button *ngIf="editing" (click)="saveUserDetails()" [disabled]="!userForm.valid && userForm.untouched" class="py-2 px-4 rounded bg-green-500 text-white hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50">
      Save
    </button>
  </div>
</div>
