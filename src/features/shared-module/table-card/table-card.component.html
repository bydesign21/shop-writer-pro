<nz-card class="__card" [nzTitle]="cardTitle">
  <div class="table-responsive">
    <nz-spin
      class="table-spinner"
      [nzSpinning]="isLoading"
      [nzIndicator]="loadingIndicatorRef"
    >
      <nz-table
        [nzLoading]="isLoading"
        [nzLoadingIndicator]="loadingIndicatorRef"
        [nzPageIndex]="pageIndex"
        [nzTotal]="data.length"
        [nzNoResult]="noResultRef"
        (nzPageIndexChange)="handlePageChange($event)"
        [nzPageSize]="pageLimit"
        [nzData]="data"
      >
        <thead>
          <tr>
            <th>Date</th>
            <th>Status</th>
            <th>VIN</th>
            <th>Model</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of pagedData">
            <td>{{ item.date | date : "MMM, dd. yyyy." }}</td>
            <td>
              <nz-tag
                style="border-radius: 0.8rem"
                [nzColor]="
                  item.status === 'processing'
                    ? 'processing'
                    : 'warning'
                "
                >{{ item.status }}</nz-tag
              >
            </td>
            <td>{{ item.vin }}</td>
            <td>{{ item.model }}</td>
            <td>
              <a (click)="viewTableRow(item)">View</a>
            </td>
          </tr>
        </tbody>
      </nz-table>
    </nz-spin>
  </div>
</nz-card>

<ng-template #viewTicketModal>
  <swp-ticket-viewer [ticket]="selectedItem"></swp-ticket-viewer>
</ng-template>
